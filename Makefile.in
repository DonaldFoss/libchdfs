CXX = g++
CPPFLAGS = 
lib_LTLIBRARIES = libhadoop.so
libhadoop_so_SOURCES = src/conf/Configuration.h src/conf/Configuration.cpp hadoop.h
makefile_CONFS = configure config.status config.log autom4te.cache/ Makefile

all: build
 
build: $(lib_LTLIBRARIES)

$(lib_LTLIBRARIES): $(libhadoop_so_SOURCES)
	g++ -shared -o $(lib_LTLIBRARIES) $(libhadoop_so_SOURCES)

clean: clean-config
	rm -rf $(lib_LTLIBRARIES) *.log

clean-config:
	rm -rf $(makefile_CONFS)

test: test-config

test-hw: test/hw
	g++ -o test/hw test/hw.cpp
	./test/hw
	
test-config: build
	g++ -o libhadoop.so test/conf/ConfigurationTest.cpp
	./test/conf/ConfigurationTest